-- MySQL Script generated by MySQL Workbench
-- Fri 19 Mar 2021 07:29:58 AM -03
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema system_solution
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema system_solution
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `system_solution` DEFAULT CHARACTER SET utf8 ;
USE `system_solution` ;

-- -----------------------------------------------------
-- Table `system_solution`.`tipo_documento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`tipo_documento` (
  `tipo_documento_id` INT NOT NULL AUTO_INCREMENT,
  `tipo_documento_nombre` VARCHAR(80) NULL,
  PRIMARY KEY (`tipo_documento_id`),
  UNIQUE INDEX `tipo_documento_id_UNIQUE` (`tipo_documento_id` ASC))
ENGINE = InnoDB;
INSERT INTO `tipo_documento` (`tipo_documento_id`, `tipo_documento_nombre`) VALUES ('1', 'Cédula de identidad (CI)'), ('2', 'Cédula de ciudadanía (CC)'), ('3', 'Tarjeta de identidad (TI)'), ('4', 'Tarjeta pasaporte (TP)'), ('5', 'Registro civil (RC)'), ('6', ' Cédula de extranjería (CE)'), ('7', 'Documento nacional de identidad (DNI)'), ('8', 'Documento único de identidad (DUI)');

-- -----------------------------------------------------
-- Table `system_solution`.`tipo_rol`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`tipo_rol` (
  `tipo_rol_id` INT NOT NULL AUTO_INCREMENT,
  `tipo_rol_nombre` VARCHAR(80) NULL,
  PRIMARY KEY (`tipo_rol_id`),
  UNIQUE INDEX `tipo_rol_id_UNIQUE` (`tipo_rol_id` ASC))
ENGINE = InnoDB;
INSERT INTO `tipo_rol` (`tipo_rol_id`, `tipo_rol_nombre`) VALUES ('1', 'Administrador'), ('2', 'Docente'), ('3', 'No docente'), ('4', 'Alumno'), ('5', 'Graduado');

-- -----------------------------------------------------
-- Table `system_solution`.`datos_usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`datos_usuario` (
  `datos_usuario_id` INT NOT NULL AUTO_INCREMENT,
  `datos_usuario_nombre` VARCHAR(80) NULL,
  `datos_usuario_apellido` VARCHAR(80) NULL,
  `datos_usuario_documento` VARCHAR(45) NULL,
  `datos_usuario_email` VARCHAR(255) NULL,
  `tipo_documento_id` INT NOT NULL,
  `datos_usuario_telefono` VARCHAR(45) NULL,
  PRIMARY KEY (`datos_usuario_id`, `tipo_documento_id`),
  UNIQUE INDEX `datos_usuario_id_UNIQUE` (`datos_usuario_id` ASC),
  INDEX `fk_datos_usuario_tipo_documento_idx` (`tipo_documento_id` ASC),
  UNIQUE INDEX `datos_usuario_documento_UNIQUE` (`datos_usuario_documento` ASC),
  UNIQUE INDEX `datos_usuario_email_UNIQUE` (`datos_usuario_email` ASC),
  CONSTRAINT `fk_datos_usuario_tipo_documento`
    FOREIGN KEY (`tipo_documento_id`)
    REFERENCES `system_solution`.`tipo_documento` (`tipo_documento_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
INSERT INTO `datos_usuario` (`datos_usuario_id`, `datos_usuario_nombre`, `datos_usuario_apellido`, `datos_usuario_documento`, `datos_usuario_email`, `tipo_documento_id`) VALUES ('1', 'Admin', 'Istrator', '1122334455', 'admin@mail.com', '3'), ('2', 'User', 'Invited', '1122334456', 'invited@mail.com', '3');

-- -----------------------------------------------------
-- Table `system_solution`.`escuela`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`escuela` (
  `escuela_id` INT NOT NULL,
  `escuela_desc` VARCHAR(255) NULL,
  PRIMARY KEY (`escuela_id`))
ENGINE = InnoDB;
INSERT INTO `escuela` (`escuela_id`, `escuela_desc`) VALUES ('1', 'Ingenieria'), ('2', 'Salud');

-- -----------------------------------------------------
-- Table `system_solution`.`carrera`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`carrera` (
  `carrera_id` INT NOT NULL,
  `carrera_desc` VARCHAR(255) NULL,
  `escuela_id` INT NOT NULL,
  PRIMARY KEY (`carrera_id`, `escuela_id`),
  INDEX `fk_carrera_escuela1_idx` (`escuela_id` ASC),
  CONSTRAINT `fk_carrera_escuela1`
    FOREIGN KEY (`escuela_id`)
    REFERENCES `system_solution`.`escuela` (`escuela_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
INSERT INTO `carrera` (`carrera_id`, `carrera_desc`, `escuela_id`) VALUES ('1', 'Programador', '1'), ('2', 'Medicina', '2');

-- -----------------------------------------------------
-- Table `system_solution`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_solution`.`usuario` (
  `usuario_id` INT NOT NULL AUTO_INCREMENT,
  `usuario_password` VARCHAR(255) NULL,
  `tipo_rol_id` INT NOT NULL,
  `datos_usuario_id` INT NOT NULL,
  `carrera_id` INT NOT NULL,
  PRIMARY KEY (`usuario_id`, `tipo_rol_id`, `datos_usuario_id`, `carrera_id`),
  UNIQUE INDEX `usuario_id_UNIQUE` (`usuario_id` ASC),
  INDEX `fk_table1_tipo_rol1_idx` (`tipo_rol_id` ASC),
  INDEX `fk_usuario_datos_usuario1_idx` (`datos_usuario_id` ASC),
  INDEX `fk_usuario_carrera1_idx` (`carrera_id` ASC),
  CONSTRAINT `fk_table1_tipo_rol1`
    FOREIGN KEY (`tipo_rol_id`)
    REFERENCES `system_solution`.`tipo_rol` (`tipo_rol_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_usuario_datos_usuario1`
    FOREIGN KEY (`datos_usuario_id`)
    REFERENCES `system_solution`.`datos_usuario` (`datos_usuario_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_usuario_carrera1`
    FOREIGN KEY (`carrera_id`)
    REFERENCES `system_solution`.`carrera` (`carrera_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
INSERT INTO `usuario` (`usuario_id`, `usuario_password`, `tipo_rol_id`, `datos_usuario_id`, `carrera_id`) VALUES ('1', '$2y$12$EF2S6DLvpgtrKnoFdRXTC.uY6tRdwGUOyNVaKXLy/OnMDu3Jo1Yfu', '1', '1', '1'), ('2', '$2y$12$EF2S6DLvpgtrKnoFdRXTC.uY6tRdwGUOyNVaKXLy/OnMDu3Jo1Yfu', '2', '2', '1');

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

